function scrollToTop(){verticalOffset=typeof verticalOffset!="undefined"?verticalOffset:0;element=$("body");offset=element.offset();offsetTop=offset.top;$("html, body").animate({scrollTop:offsetTop},500,"linear")}function ScrollToAnchor(n){return $("html, body").animate({scrollTop:$("#"+n).offset().top-200},500,"linear"),!1}function SetUpModal(){$("body").on("click",".modal-link",function(n){n.preventDefault();$(this).attr("data-target","#modal-container");$(this).attr("data-toggle","modal")});$("body").on("click",".modal-close-btn",function(){$("#modal-container").modal("hide")});$("#modal-container").on("hidden.bs.modal",function(){$(this).removeData("bs.modal")});$("#CancelModal").on("click",function(){return!1})}function OnNavBarClick(n,t,i,r,u){var o="/"+i+"/"+t,f="#divYearContent",s="#"+u+" li",e=$("#"+n).attr("data-callbackid");n="#"+n;t!="PopulateYear"&&t!="PopulateConference"&&(r="",f="#divArticleContent");t&&(window.location.hash=t);$(s).removeClass("active");$(n).addClass("active");$.ajax({url:o,contentType:"application/html; charset=utf-8",type:"GET",datatype:"json",cache:!1,data:{period:r},success:function(n){$(f).html("");$(f).html(n);e!=null&&$("#"+e.replace(/\./g,"\\.")).click()}})}function LoadVolume(n){toggleID="#"+n;n="#"+n+"Button";$(".NavAnchorButton").removeClass("VolumeButtonactive");$(n).addClass("VolumeButtonactive");$(".ThousandVolBlock").hide();$(toggleID).toggle()}function CallProceedingsArticleButton3(){$("html,data").animate({scrollTop:$(".div1").offset().top},"slow")}function CallProceedingsArticleButton1(n){n="."+n;$.ajax({url:"/eBookChapterNotSignedIn/ShowPopOver",contentType:"application/html; charset=utf-8",type:"GET",datatype:"json",cache:!1,data:{},success:function(t){$(n).popover({html:!0,placement:"bottom",title:"",container:"body",content:t}).popover("show")}})}function JumpToID(n){$("body,html").animate({scrollTop:$("#"+n.replace(/\./g,"\\.")).offset().top-200},600)}function ScopeItemVisibleToggle(n,t){var r=document.getElementById("ScopeDiv"+t),i=document.getElementById("ScopeItem"+t),u=document.getElementById("ScopeImage"+t),f=i.style.display;return $("."+n+"Item").hide(),$("."+n+"ImageDiv").css("background","#f1f2f2"),$("."+n+"Image").attr("src","../Content/themes/SPIEImages/Expand_Icon.png"),f=="none"?(i.style.display="block",r.style.backgroundColor="#fff100",changeIcon(u,"../Content/themes/SPIEImages/Collapse_Icon.png")):(i.style.display="none",r.style.backgroundColor="#f1f2f2",changeIcon(u,"../Content/themes/SPIEImages/Expand_Icon.png")),!1}function SubSympVisibleToggle(n,t){$("#"+n).toggle();$("#"+n).css("display")=="none"?($("#"+t+" img").attr("src","../Content/themes/SPIEImages/Expand_Icon.png"),$("#"+t).css("background-color","rgb(241, 242, 242)")):($("#"+t+" img").attr("src","../Content/themes/SPIEImages/Collapse_Icon.png"),$("#"+t).css("background-color","rgb(255, 241, 0)"))}function YearVisibleToggle(n,t,r){var f=document.getElementById(r+"YearDiv"+t),u=document.getElementById(r+"YearItem"+t),e=document.getElementById(r+"YearImage"+t),s=u.style.display,h="."+r+"ScopeDetailsItem",o=$("."+r+"ScopeDetailsImageDiv img").select();for(i=0;i<o.length;i++)changeIcon(o[i],"../Content/themes/SPIEImages/Expand_Icon.png");return $(h).hide(),$("."+r+"ScopeDetailsImageDiv").css("backgroundColor","#f1f2f2"),s=="none"?(u.style.display="block",f.style.backgroundColor="#fff100",changeIcon(e,"../Content/themes/SPIEImages/Collapse_Icon.png"),$(u).addClass("ActiveYear")):(u.style.display="none",f.style.backgroundColor="#f1f2f2",changeIcon(e,"../Content/themes/SPIEImages/Expand_Icon.png")),createCookie("ConferenceCookie",t,1),!1}function AllConferenceVisibleToggle(n,t,i,r){var u=document.getElementById(t);return u.style.display=="none"?(u.style.display="block",$("#divShow .TextShow").text("Showing "+i+" Recent Proceedings")):(u.style.display="none",$("#divShow .TextShow").text("Showing "+r+" Recent Proceedings")),!1}function changeIcon(n,t){var i=new Image;i.onload=function(){n.src=this.src};i.src=t}function FilterSearchTerm(n){var t=new RegExp("<|>","gi");return $("#"+n).val($("#"+n).val().replace(t,"")),$("#"+n).val()!=""}function SearchTermAutoCompleteSource(n,t){var i=n.term;!searchTaxonList||searchTaxonList.length<=0?getTaxonListAjaxCall&&getTaxonListAjaxCall.readyState!=4||(getTaxonListAjaxCall=$.ajax({url:"/SearchAjax/GetTaxonList",contentType:"application/html; charset=utf-8",type:"GET",cache:!0,success:function(n){searchTaxonList=n.split("\t");LoadSearchTermDropdown(i,searchTaxonList,t)}})):LoadSearchTermDropdown(i,searchTaxonList,t)}function LoadSearchTermDropdown(n,t,r){var e=n.toLowerCase(),u,f;if(n.length>=3){for(u=[],i=0;i<searchTaxonList.length;i++)f=searchTaxonList[i],f.toLowerCase().indexOf(e)==0&&u.push(n+f.slice(n.length).toLowerCase());r(u)}else r([]);$(".ui-autocomplete").scrollTop(0)}function ShowAdvancedSearchModal(){$("#divModalAdvSearchForm").dialog({width:830,modal:!0,resizable:!1,draggable:!1,title:"ADVANCED SEARCH",zIndex:101,scroll:500})}function SubmitAdvSearch(){var f="advSearchYearSlider",t="term=",n="",s=0,a="",h,u,l,r,o;for(index=0;index<10;index++)typeof $("#advSearchText"+index).val()!="undefined"&&$("#advSearchText"+index).val().length>0&&(s>0&&(s>1&&$("#advSearchLogic"+index).val()=="OR"!=(a=="OR")&&(n="("+n+") "),a=$("#advSearchLogic"+index).val(),n+=" "+$("#advSearchLogic"+index).val()+" "),$("#advSearchField"+index).val()!="ALL"&&(n+=$("#advSearchField"+index).val()+":"),FilterSearchTerm("advSearchText"+index),n+="("+encodeURIComponent($("#advSearchText"+index).val())+")",s++);for(t+=n,h=["PubType","Journal_Article","eBook"],i=0;i<h.length;i++){var r=h[i],c=document.getElementsByClassName("advSearch"+r),e="";for(u=0;u<c.length;u++)c[u].checked&&(e+=escape(c[u].value)+";");e.length>1&&(t+="&"+r+"="+e.substr(0,e.length-1))}for(l=["ProceedingsVolume","ProceedingsPaper","JournalVolume","JournalIssue","JournalPage"],i=0;i<l.length;i++)r=l[i],o=$("#advSearch"+r),typeof o.val()!="undefined"&&o.val()!=""&&(t+="&"+r+"="+o.val());var p=$("#"+f).slider("option","min"),w=$("#"+f).slider("option","max"),v=$("#"+f).slider("values",0),y=$("#"+f).slider("values",1);(p<v||w>y)&&(t+="&startYear="+v+"&endYear="+y);window.location=$("#dlURL").val()+"/search?"+t}function ChangeAdvSearchSingleYear(){var i="advSearchYearSlider",t=$("#advSearchSingleYear"),n=parseInt(t.val(),10),r,u;t.val()==""?(t.css("border",""),advSearchPrevSingleYear!=""&&(r=$("#"+i).slider("option","min"),u=$("#"+i).slider("option","max"),UpdateYearRangeSlider(i,r,u),advSearchPrevSingleYear="")):(t.val().length=4&&n!=NaN&&n>=$("#advSearchYearSlider").slider("option","min")&&n<=$("#advSearchYearSlider").slider("option","max"))?(t.css("border",""),advSearchPrevSingleYear!=n&&(ClearAdvSearchYearRangeTextboxes(),UpdateYearRangeSlider(i,n,n),advSearchPrevSingleYear=n)):t.css("border","2px solid red")}function ChangeAdvSearchYearSlider(n,t){var i="advSearchYearSlider",r=$("#"+i).slider("option","min"),u=$("#"+i).slider("option","max");advSearchPrevSingleYear="";ClearAdvSearchSingleYear();ClearAdvSearchYearRangeTextboxes();n.length==0&&t.length==0||n==r&&t==u?UpdateYearRangeSlider(i,r,u):(advSearchPrevYearDrag="left",advSearchPrevStartYear!=n?(advSearchPrevYearDrag="left",$("#searchYearSlider span:nth-child(2)").css("z-index","3"),$("#searchYearSlider span:nth-child(3)").css("z-index","2")):(advSearchPrevYearDrag="right",$("#searchYearSlider span:nth-child(2)").css("z-index","2"),$("#searchYearSlider span:nth-child(3)").css("z-index","3")),n==t&&(prevSingleYear=n,$("#advSearchSingleYear").val(n)),UpdateYearRangeSlider(i,n,t,advSearchPrevYearDrag));advSearchPrevStartYear=n;advSearchPrevEndYear=t}function ChangeAdvSearchYearRangeTextbox(n){var t="advSearchYearSlider",r=$("#"+t+n),i=parseInt(r.val(),10),u,f,e,o=!1;n=="End"?(u=$("#"+t).slider("values",0)<=i,f=$("#"+t).slider("values",0),e=i,o=i!=advSearchPrevEndYear):(u=i<=$("#"+t).slider("values",1),f=i,e=$("#"+t).slider("values",1),o=i!=advSearchPrevEndYear);r.val()==""?(r.css("border",""),UpdateYearRangeSliderText(t)):(r.val().length=4&&i!=NaN&&u&&i>=$("#"+t).slider("option","min")&&i<=$("#"+t).slider("option","max"))?(r.css("border",""),o&&(ClearAdvSearchYearRangeTextboxes(),ClearAdvSearchSingleYear(),UpdateYearRangeSlider(t,f,e))):r.css("border","2px solid red")}function UpdateYearRangeSlider(n,t,i,r){r=="left"||t==i&&t==$("#"+n).slider("option","max")?($("#"+n).slider("values",1,i),$("#"+n).slider("values",0,t),$("#"+n+" span:nth-child(2)").css("z-index","3"),$("#"+n+" span:nth-child(3)").css("z-index","2")):($("#"+n).slider("values",0,t),$("#"+n).slider("values",1,i),$("#"+n+" span:nth-child(2)").css("z-index","2"),$("#"+n+" span:nth-child(3)").css("z-index","3"));r="";UpdateYearRangeSliderText(n)}function UpdateYearRangeSliderText(n){$("#"+n+"Start").val($("#"+n).slider("values",0));$("#"+n+"End").val($("#"+n).slider("values",1))}function ClearAdvSearchYearRangeTextboxes(){$("#advSearchYearSliderStart").css("border","");$("#advSearchYearSliderEnd").css("border","")}function ClearAdvSearchSingleYear(){$("#advSearchSingleYear").css("border","");$("#advSearchSingleYear").val("");advSearchPrevSingleYear=""}function ToggleAllAbstract(n){var t=n.innerText;return t=="VIEW ALL ABSTRACTS +"?($("#TocLineAnchorText").text("HIDE ALL ABSTRACTS"),$("#TocLineAnchorSign").text("-"),$(".anchorrel").toggle(),$(".TocLineItemAnchorSelect").text("Hide Abstract")):($("#TocLineAnchorText").text("VIEW ALL ABSTRACTS"),$("#TocLineAnchorSign").text("+"),$(".anchorrel").toggle(),$(".TocLineItemAnchorSelect").text("Read Abstract")),!1}function TOCLineItemVisibleToggle(n,t,i,r){i||(i="Read Abstract +");r||(r="Hide Abstract -");var u=document.getElementById(t);return u.style.display=="none"?(u.style.display="block",n.innerText=r):(u.style.display="none",n.innerText=i),!1}function TOCLineAllItemVisibleToggle(n){var f=n.innerText,e=n.id,i="",r,t,u;for(f=="SHOW ALL CHAPTER OUTLINES +"?($("div.row .anchorrel").show(),$("#TOCLineHeaderText").text("HIDE ALL CHAPTER OUTLINES"),$("#TOCLineHeaderSign").text("-"),i="Chapter Outline -"):($("div.row .anchorrel").hide(),$("#TOCLineHeaderText").text("SHOW ALL CHAPTER OUTLINES"),$("#TOCLineHeaderSign").text("+"),i="Chapter Outline +"),r=$(".TOCLineItemAnchorText").select(),t=0;t<r.length;t++)u=r[t],u.innerText=i;return!1}function AddAdvSearchField(){if(AdvSearchFieldCount<10){var n='<div id="advSearchFindFieldContainer'+AdvSearchFieldCount+'" class="advSearchFindFieldContainer"> <select id="advSearchLogic'+AdvSearchFieldCount+'" class="advSearchLogic">    <option value="AND">AND<\/option>    <option value="OR">OR<\/option>    <option value="NOT">NOT<\/option> <\/select> <input id="advSearchText'+AdvSearchFieldCount+'" class="advSearchKeywordTextbox" type="text" placeholder="Enter Keywords / Phrases / Author Name / Publication Title" />  <div class="advSearchFieldInLabel" >in<\/div> <select id="advSearchField'+AdvSearchFieldCount+'" class="advSearchFieldSelect">    <option value="ALL">All Fields<\/option>    <option value="ABSTRACT">Abstract<\/option>    <option value="AUTHORNAME">Author Name<\/option>    <option value="AFFILIATION">Affiliation<\/option>    <option value="KEYWORDS">Keywords<\/option>    <option value="TITLE">Title<\/option >   <option value="VOLUMETITLE">Volume Title<\/option ><\/select> <div class="inlineLink" onclick="RemoveAdvSearchField('+AdvSearchFieldCount+')">Remove<\/div><\/div>';$("#advSearchFindFields").append(n);AdvSearchFieldCount>=9&&$("#advSearchAddField").hide();$("#advSearchText"+AdvSearchFieldCount).autocomplete({source:function(n,t){$("#advSearchText"+AdvSearchFieldCount+"Gray").val("");SearchTermAutoCompleteSource(n,t)},focus:function(n,t){return $("#advSearchText"+AdvSearchFieldCount+"Gray").val(t.item.value),!1},select:function(n,t){$(this).val(t.item.value)}}).autocomplete("widget").addClass("searchTermAutoComplete");AdvSearchFieldCount++}}function RemoveAdvSearchField(n){for(var t=0;t<AdvSearchFieldCount;t++)t==0&&AdvSearchFieldCount==1?ClearAdvSearchField(t):t>=n&&($("#advSearchText"+t).val($("#advSearchText"+(t+1)).val()),$("#advSearchField"+t).val($("#advSearchField"+(t+1)).val()),t!=0&&$("#advSearchLogic"+t).val($("#advSearchLogic"+(t+1)).val())),t==AdvSearchFieldCount-1&&AdvSearchFieldCount-1!=0&&($("#advSearchFindFieldContainer"+t).remove(),AdvSearchFieldCount--)}function ClearAdvSearchFields(){for(var n=0;n<AdvSearchFieldCount;n++)ClearAdvSearchField(n),n!=0&&$("#advSearchFindFieldContainer"+n).remove();AdvSearchFieldCount=1;AddAdvSearchField();AddAdvSearchField()}function ClearAdvSearchField(n){$("#advSearchText"+n).val("");$("#advSearchText"+n+"Gray").val("");$("#advSearchField"+n).val("ALL");n!=0&&$("#advSearchLogic"+n).val("AND")}function ClearAdvSearchSearchIn(){$("#SearchInAdvSearchContainer input[type=checkbox]").prop("checked",!1).change()}function ClearAdvSearch(){ClearAdvSearchFields();ClearAdvSearchSearchIn();ChangeAdvSearchYearSlider("","")}function AuthorAffiliationToggle(n){return $("#affiliations").toggle(),n.innerText=n.innerText=="Author Affiliations +"?"Author Affiliations -":"Author Affiliations +",!1}function showEbookAccessPopup(n,t,i){return $(".divPopup").hide(),t==null||t==""?$(".shoppingCartArticleLink").css("display","none"):$(".shoppingCartArticleLink").attr("href","https://"+i+"/publications/book/"+encodeURIComponent(t)),$("#EbookAccessPopup").dialog({width:400,height:250,modal:!0,resizable:!1,draggable:!1,closeOnEscape:!0,zIndex:999,title:"ACCESS TO EBOOKS IS LIMITED"}),$.ajax(n),!1}function ShowDownloadConfirmationDialog(n,t){return $(".divPopup").hide(),$("#downloadConfirmationLink").attr("href",n),$("#downloadConfirmationDialog").dialog({width:325,height:225,modal:!0,resizable:!1,draggable:!1,closeOnEscape:!0,zIndex:999,title:"DOWNLOAD CONFIRMATION"}),$.ajax(t),!1}function DownloadWithRedirect(){setTimeout(function(){window.location.reload(!0)},500)}function DownloadPDF(n){$(".divPopup").hide();DownloadWithRedirect();window.open(n,"_blank")}function ShowTokenSigninDialog(n){return $(".divPopup").hide(),$("#TokenUseRedirect").attr("value",n),$("#TokenUseSigninDialog").dialog({width:360,height:525,modal:!0,resizable:!1,draggable:!1,closeOnEscape:!0,zIndex:999,title:"Please sign in"}),!1}function postTokenUseSignInForm(n){return n.preventDefault(),$.ajax({type:"POST",url:"/Account/SignIn",data:$("#TokenUseSignInForm").serialize(),dataType:"json",async:!1,success:function(n){n.Success?(window.open($("#TokenUseRedirect").val()),location.reload()):$("#TokenUseSignInErrors").text(n.Message)},error:function(){$("#TokenUseSignInErrors").text("Sign in failure. Please try again.")}}),!1}function createCookie(n,t,i){var u="",r;i&&(r=new Date,r.setTime(r.getTime()+i*864e5),u="; expires="+r.toUTCString());document.cookie=n+"="+t+u+";path=/;"}function readCookie(n){for(var t,r=n+"=",u=document.cookie.split(";"),i=0;i<u.length;i++){for(t=u[i];t.charAt(0)==" ";)t=t.substring(1,t.length);if(t.indexOf(r)==0)return t.substring(r.length,t.length)}return null}function eraseCookie(n){createCookie(n,"",-1)}function LogVideoView(){if(this.hasOwnProperty("videojs"))videojs("myPlayerID").on("firstplay",function(){var n=$("#videoJSDOI").val();$.ajax("/logvideoview/"+n)});else setTimeout(function(){LogVideoView()},250)}var searchTaxonList,getTaxonListAjaxCall,AdvSearchFieldCount,hackyTriggerOnChangeListAdvSearch,id;$(document).ready(function(){var n=$("div.equals").css("height");$("div.equals div.equal").css("height",n);$("div.scroll-to-self a").click(function(){var n=$(this).attr("href");return $("html, body").animate({scrollTop:$(n).offset().top-115},500),!1});$('a[href="#top"]').click(function(n){n.preventDefault();$("html, body").animate({scrollTop:0},"600")});$("div.access").delay(600).slideToggle();$("div.access span.close").click(function(n){n.preventDefault();$(this).parent().parent().slideToggle();$.ajax({url:"SessionSiteAccess/Disable"})});$("ul.checklist a").click(function(n){n.preventDefault();$(this).parent().toggleClass("on")});$("div.dropdown p a").click(function(n){n.preventDefault();$(this).parent().next().slideToggle()});$("div.dropdown ul a").click(function(n){n.preventDefault();var t=$(this).text();$(this).parent().parent().slideToggle();$(this).closest("div.dropdown").find("span.default").text(t)});$("#account-detail > a").click(function(n){n.preventDefault();$("#account-detail ul").toggle()});$("header").click(function(){$("#account-detail ul").hide()});$("main").click(function(){$("#account-detail ul").hide()});window.matchMedia("(min-width: 1200px)").matches?$("#fixed .bottom span.close").show():$("#fixed .bottom span.close").hide();$(".mp-modal").magnificPopup({closeOnBgClick:!1,type:"inline"})});$(window).resize(function(){window.matchMedia("(min-width: 1200px)").matches?$("#fixed .bottom span.close").show():$("#fixed .bottom span.close").hide()});$(document).scroll(function(){var n=$(this).scrollTop();n>160?($("nav#fixed").addClass("show"),$("#fixed span.close").click(function(n){n.preventDefault();$("#fixed").hide()})):$("nav#fixed").removeClass("show")});$(document).scroll(function(){var n=$(this).scrollTop();n>1300?($("nav#fixed .top").addClass("show"),$("#fixed span.close").click(function(n){n.preventDefault();$("#fixed").removeClass("show")})):$("nav#fixed .top").removeClass("show")});$(document).ready(function(){$("#fixed span.close").click(function(n){n.preventDefault();$("#fixed").removeClass("show")})});$(document).scroll(function(){var n=$(this).scrollTop();n>700?$("a.top-button").fadeIn():$("a.top-button").fadeOut();$(window).scrollTop()+$(window).height()>$(document).height()-215?$("a.top-button").css({bottom:"30px",position:"absolute"}):$("a.top-button").css({bottom:"245px",position:"fixed"})}),function(n){typeof define=="function"&&define.amd?define(["jquery"],n):typeof exports=="object"?n(require("jquery")):n(window.jQuery||window.Zepto)}(function(n){var h="Close",pt="BeforeClose",ti="AfterClose",ii="BeforeAppend",it="MarkupParse",rt="Open",wt="Change",ut="mfp",u="."+ut,p="mfp-ready",bt="mfp-removing",ft="mfp-prevent-close",t,w=function(){},et=!!window.jQuery,ot,f=n(window),o,b,c,kt,r=function(n,i){t.ev.on(ut+n+u,i)},e=function(t,i,r,u){var f=document.createElement("div");return f.className="mfp-"+t,r&&(f.innerHTML=r),u?i&&i.appendChild(f):(f=n(f),i&&f.appendTo(i)),f},i=function(i,r){t.ev.triggerHandler(ut+i,r);t.st.callbacks&&(i=i.charAt(0).toLowerCase()+i.slice(1),t.st.callbacks[i]&&t.st.callbacks[i].apply(t,n.isArray(r)?r:[r]))},st=function(i){return i===kt&&t.currTemplate.closeBtn||(t.currTemplate.closeBtn=n(t.st.closeMarkup.replace("%title%",t.st.tClose)),kt=i),t.currTemplate.closeBtn},ht=function(){n.magnificPopup.instance||(t=new w,t.init(),n.magnificPopup.instance=t)},ri=function(){var n=document.createElement("p").style,t=["ms","O","Moz","Webkit"];if(n.transition!==undefined)return!0;while(t.length)if(t.pop()+"Transition"in n)return!0;return!1},k,a,d,g,ct,s,gt,at,ni,nt,yt,tt;w.prototype={constructor:w,init:function(){var i=navigator.appVersion;t.isIE7=i.indexOf("MSIE 7.")!==-1;t.isIE8=i.indexOf("MSIE 8.")!==-1;t.isLowIE=t.isIE7||t.isIE8;t.isAndroid=/android/gi.test(i);t.isIOS=/iphone|ipad|ipod/gi.test(i);t.supportsTransition=ri();t.probablyMobile=t.isAndroid||t.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent);o=n(document);t.popupsCache={}},open:function(s){var h,w,l,b,a,k,v,d,y;if(s.isObj===!1){for(t.items=s.items.toArray(),t.index=0,w=s.items,h=0;h<w.length;h++)if(l=w[h],l.parsed&&(l=l.el[0]),l===s.el[0]){t.index=h;break}}else t.items=n.isArray(s.items)?s.items:[s.items],t.index=s.index||0;if(t.isOpen){t.updateItemHTML();return}for(t.types=[],c="",t.ev=s.mainEl&&s.mainEl.length?s.mainEl.eq(0):o,s.key?(t.popupsCache[s.key]||(t.popupsCache[s.key]={}),t.currTemplate=t.popupsCache[s.key]):t.currTemplate={},t.st=n.extend(!0,{},n.magnificPopup.defaults,s),t.fixedContentPos=t.st.fixedContentPos==="auto"?!t.probablyMobile:t.st.fixedContentPos,t.st.modal&&(t.st.closeOnContentClick=!1,t.st.closeOnBgClick=!1,t.st.showCloseBtn=!1,t.st.enableEscapeKey=!1),t.bgOverlay||(t.bgOverlay=e("bg").on("click"+u,function(){t.close()}),t.wrap=e("wrap").attr("tabindex",-1).on("click"+u,function(n){t._checkIfClose(n.target)&&t.close()}),t.container=e("container",t.wrap)),t.contentContainer=e("content"),t.st.preloader&&(t.preloader=e("preloader",t.container,t.st.tLoading)),b=n.magnificPopup.modules,h=0;h<b.length;h++)a=b[h],a=a.charAt(0).toUpperCase()+a.slice(1),t["init"+a].call(t);return i("BeforeOpen"),t.st.showCloseBtn&&(t.st.closeBtnInside?(r(it,function(n,t,i,r){i.close_replaceWith=st(r.type)}),c+=" mfp-close-btn-in"):t.wrap.append(st())),t.st.alignTop&&(c+=" mfp-align-top"),t.fixedContentPos?t.wrap.css({overflow:t.st.overflowY,overflowX:"hidden",overflowY:t.st.overflowY}):t.wrap.css({top:f.scrollTop(),position:"absolute"}),(t.st.fixedBgPos===!1||t.st.fixedBgPos==="auto"&&!t.fixedContentPos)&&t.bgOverlay.css({height:o.height(),position:"absolute"}),t.st.enableEscapeKey&&o.on("keyup"+u,function(n){n.keyCode===27&&t.close()}),f.on("resize"+u,function(){t.updateSize()}),t.st.closeOnContentClick||(c+=" mfp-auto-cursor"),c&&t.wrap.addClass(c),k=t.wH=f.height(),v={},t.fixedContentPos&&t._hasScrollBar(k)&&(d=t._getScrollbarSize(),d&&(v.marginRight=d)),t.fixedContentPos&&(t.isIE7?n("body, html").css("overflow","hidden"):v.overflow="hidden"),y=t.st.mainClass,t.isIE7&&(y+=" mfp-ie7"),y&&t._addClassToMFP(y),t.updateItemHTML(),i("BuildControls"),n("html").css(v),t.bgOverlay.add(t.wrap).prependTo(t.st.prependTo||n(document.body)),t._lastFocusedEl=document.activeElement,setTimeout(function(){t.content?(t._addClassToMFP(p),t._setFocus()):t.bgOverlay.addClass(p);o.on("focusin"+u,t._onFocusIn)},16),t.isOpen=!0,t.updateSize(k),i(rt),s},close:function(){t.isOpen&&(i(pt),t.isOpen=!1,t.st.removalDelay&&!t.isLowIE&&t.supportsTransition?(t._addClassToMFP(bt),setTimeout(function(){t._close()},t.st.removalDelay)):t._close())},_close:function(){var r,f;i(h);r=bt+" "+p+" ";t.bgOverlay.detach();t.wrap.detach();t.container.empty();t.st.mainClass&&(r+=t.st.mainClass+" ");t._removeClassFromMFP(r);t.fixedContentPos&&(f={marginRight:""},t.isIE7?n("body, html").css("overflow",""):f.overflow="",n("html").css(f));o.off("keyup"+u+" focusin"+u);t.ev.off(u);t.wrap.attr("class","mfp-wrap").removeAttr("style");t.bgOverlay.attr("class","mfp-bg");t.container.attr("class","mfp-container");t.st.showCloseBtn&&(!t.st.closeBtnInside||t.currTemplate[t.currItem.type]===!0)&&t.currTemplate.closeBtn&&t.currTemplate.closeBtn.detach();t._lastFocusedEl&&n(t._lastFocusedEl).focus();t.currItem=null;t.content=null;t.currTemplate=null;t.prevHeight=0;i(ti)},updateSize:function(n){if(t.isIOS){var u=document.documentElement.clientWidth/window.innerWidth,r=window.innerHeight*u;t.wrap.css("height",r);t.wH=r}else t.wH=n||f.height();t.fixedContentPos||t.wrap.css("height",t.wH);i("Resize")},updateItemHTML:function(){var u=t.items[t.index],r,f,e;t.contentContainer.detach();t.content&&t.content.detach();u.parsed||(u=t.parseEl(t.index));r=u.type;i("BeforeChange",[t.currItem?t.currItem.type:"",r]);t.currItem=u;t.currTemplate[r]||(f=t.st[r]?t.st[r].markup:!1,i("FirstMarkupParse",f),t.currTemplate[r]=f?n(f):!0);b&&b!==u.type&&t.container.removeClass("mfp-"+b+"-holder");e=t["get"+r.charAt(0).toUpperCase()+r.slice(1)](u,t.currTemplate[r]);t.appendContent(e,r);u.preloaded=!0;i(wt,u);b=u.type;t.container.prepend(t.contentContainer);i("AfterChange")},appendContent:function(n,r){t.content=n;n?t.st.showCloseBtn&&t.st.closeBtnInside&&t.currTemplate[r]===!0?t.content.find(".mfp-close").length||t.content.append(st()):t.content=n:t.content="";i(ii);t.container.addClass("mfp-"+r+"-holder");t.contentContainer.append(t.content)},parseEl:function(r){var u=t.items[r],o,e,f;if(u.tagName?u={el:n(u)}:(o=u.type,u={data:u,src:u.src}),u.el){for(e=t.types,f=0;f<e.length;f++)if(u.el.hasClass("mfp-"+e[f])){o=e[f];break}u.src=u.el.attr("data-mfp-src");u.src||(u.src=u.el.attr("href"))}return u.type=o||t.st.type||"inline",u.index=r,u.parsed=!0,t.items[r]=u,i("ElementParse",u),t.items[r]},addGroup:function(n,i){var u=function(r){r.mfpEl=this;t._openClick(r,n,i)},r;i||(i={});r="click.magnificPopup";i.mainEl=n;i.items?(i.isObj=!0,n.off(r).on(r,u)):(i.isObj=!1,i.delegate?n.off(r).on(r,i.delegate,u):(i.items=n,n.off(r).on(r,u)))},_openClick:function(i,r,u){var o=u.midClick!==undefined?u.midClick:n.magnificPopup.defaults.midClick,e;if(o||!(i.which===2||i.ctrlKey||i.metaKey||i.altKey||i.shiftKey)){if(e=u.disableOn!==undefined?u.disableOn:n.magnificPopup.defaults.disableOn,e)if(n.isFunction(e)){if(!e.call(t))return!0}else if(f.width()<e)return!0;i.type&&(i.preventDefault(),t.isOpen&&i.stopPropagation());u.el=n(i.mfpEl);u.delegate&&(u.items=r.find(u.delegate));t.open(u)}},updateStatus:function(n,r){if(t.preloader){ot!==n&&t.container.removeClass("mfp-s-"+ot);r||n!=="loading"||(r=t.st.tLoading);var u={status:n,text:r};i("UpdateStatus",u);n=u.status;r=u.text;t.preloader.html(r);t.preloader.find("a").on("click",function(n){n.stopImmediatePropagation()});t.container.addClass("mfp-s-"+n);ot=n}},_checkIfClose:function(i){if(!n(i).hasClass(ft)){var r=t.st.closeOnContentClick,u=t.st.closeOnBgClick;if(r&&u||!t.content||n(i).hasClass("mfp-close")||t.preloader&&i===t.preloader[0])return!0;if(i===t.content[0]||n.contains(t.content[0],i)){if(r)return!0}else if(u&&n.contains(document,i))return!0;return!1}},_addClassToMFP:function(n){t.bgOverlay.addClass(n);t.wrap.addClass(n)},_removeClassFromMFP:function(n){this.bgOverlay.removeClass(n);t.wrap.removeClass(n)},_hasScrollBar:function(n){return(t.isIE7?o.height():document.body.scrollHeight)>(n||f.height())},_setFocus:function(){(t.st.focus?t.content.find(t.st.focus).eq(0):t.wrap).focus()},_onFocusIn:function(i){if(i.target!==t.wrap[0]&&!n.contains(t.wrap[0],i.target))return t._setFocus(),!1},_parseMarkup:function(t,r,f){var e;f.data&&(r=n.extend(f.data,r));i(it,[t,r,f]);n.each(r,function(n,i){var r,f;if(i===undefined||i===!1)return!0;e=n.split("_");e.length>1?(r=t.find(u+"-"+e[0]),r.length>0&&(f=e[1],f==="replaceWith"?r[0]!==i[0]&&r.replaceWith(i):f==="img"?r.is("img")?r.attr("src",i):r.replaceWith('<img src="'+i+'" class="'+r.attr("class")+'" />'):r.attr(e[1],i))):t.find(u+"-"+n).html(i)})},_getScrollbarSize:function(){if(t.scrollbarSize===undefined){var n=document.createElement("div");n.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;";document.body.appendChild(n);t.scrollbarSize=n.offsetWidth-n.clientWidth;document.body.removeChild(n)}return t.scrollbarSize}};n.magnificPopup={instance:null,proto:w.prototype,modules:[],open:function(t,i){return ht(),t=t?n.extend(!0,{},t):{},t.isObj=!0,t.index=i||0,this.instance.open(t)},close:function(){return n.magnificPopup.instance&&n.magnificPopup.instance.close()},registerModule:function(t,i){i.options&&(n.magnificPopup.defaults[t]=i.options);n.extend(this.proto,i.proto);this.modules.push(t)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,prependTo:null,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&#215;<\/button>',tClose:"Close (Esc)",tLoading:"Loading..."}};n.fn.magnificPopup=function(i){var r,u,f,e;return ht(),r=n(this),typeof i=="string"?i==="open"?(f=et?r.data("magnificPopup"):r[0].magnificPopup,e=parseInt(arguments[1],10)||0,f.items?u=f.items[e]:(u=r,f.delegate&&(u=u.find(f.delegate)),u=u.eq(e)),t._openClick({mfpEl:u},r,f)):t.isOpen&&t[i].apply(t,Array.prototype.slice.call(arguments,1)):(i=n.extend(!0,{},i),et?r.data("magnificPopup",i):r[0].magnificPopup=i,t.addGroup(r,i)),r};k="inline";ct=function(){g&&(d.after(g.addClass(a)).detach(),g=null)};n.magnificPopup.registerModule(k,{options:{hiddenClass:"hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){t.types.push(k);r(h+"."+k,function(){ct()})},getInline:function(i,r){var f,u,o;return(ct(),i.src)?(f=t.st.inline,u=n(i.src),u.length?(o=u[0].parentNode,o&&o.tagName&&(d||(a=f.hiddenClass,d=e(a),a="mfp-"+a),g=u.after(d).detach().removeClass(a)),t.updateStatus("ready")):(t.updateStatus("error",f.tNotFound),u=n("<div>")),i.inlineElement=u,u):(t.updateStatus("ready"),t._parseMarkup(r,{},i),r)}}});var v="ajax",y,lt=function(){y&&n(document.body).removeClass(y)},dt=function(){lt();t.req&&t.req.abort()};n.magnificPopup.registerModule(v,{options:{settings:null,cursor:"mfp-ajax-cur",tError:'<a href="%url%">The content<\/a> could not be loaded.'},proto:{initAjax:function(){t.types.push(v);y=t.st.ajax.cursor;r(h+"."+v,dt);r("BeforeChange."+v,dt)},getAjax:function(r){y&&n(document.body).addClass(y);t.updateStatus("loading");var u=n.extend({url:r.src,success:function(u,f,e){var o={data:u,xhr:e};i("ParseAjax",o);t.appendContent(n(o.data),v);r.finished=!0;lt();t._setFocus();setTimeout(function(){t.wrap.addClass(p)},16);t.updateStatus("ready");i("AjaxContentAdded")},error:function(){lt();r.finished=r.loadError=!0;t.updateStatus("error",t.st.ajax.tError.replace("%url%",r.src))}},t.st.ajax.settings);return t.req=n.ajax(u),""}}});gt=function(i){if(i.data&&i.data.title!==undefined)return i.data.title;var r=t.st.image.titleSrc;if(r){if(n.isFunction(r))return r.call(t,i);if(i.el)return i.el.attr(r)||""}return""};n.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"><\/div><figure><div class="mfp-img"><\/div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"><\/div><div class="mfp-counter"><\/div><\/div><\/figcaption><\/figure><\/div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image<\/a> could not be loaded.'},proto:{initImage:function(){var i=t.st.image,e=".image";t.types.push("image");r(rt+e,function(){t.currItem.type==="image"&&i.cursor&&n(document.body).addClass(i.cursor)});r(h+e,function(){i.cursor&&n(document.body).removeClass(i.cursor);f.off("resize"+u)});r("Resize"+e,t.resizeImage);t.isLowIE&&r("AfterChange",t.resizeImage)},resizeImage:function(){var n=t.currItem,i;n&&n.img&&t.st.image.verticalFit&&(i=0,t.isLowIE&&(i=parseInt(n.img.css("padding-top"),10)+parseInt(n.img.css("padding-bottom"),10)),n.img.css("max-height",t.wH-i))},_onImageHasSize:function(n){n.img&&(n.hasSize=!0,s&&clearInterval(s),n.isCheckingImgSize=!1,i("ImageHasSize",n),n.imgHidden&&(t.content&&t.content.removeClass("mfp-loading"),n.imgHidden=!1))},findImageSize:function(n){var i=0,u=n.img[0],r=function(f){s&&clearInterval(s);s=setInterval(function(){if(u.naturalWidth>0){t._onImageHasSize(n);return}i>200&&clearInterval(s);i++;i===3?r(10):i===40?r(50):i===100&&r(500)},f)};r(1)},getImage:function(r,u){var e=0,o=function(){r&&(r.img[0].complete?(r.img.off(".mfploader"),r===t.currItem&&(t._onImageHasSize(r),t.updateStatus("ready")),r.hasSize=!0,r.loaded=!0,i("ImageLoadComplete")):(e++,e<200?setTimeout(o,100):h()))},h=function(){r&&(r.img.off(".mfploader"),r===t.currItem&&(t._onImageHasSize(r),t.updateStatus("error",c.tError.replace("%url%",r.src))),r.hasSize=!0,r.loaded=!0,r.loadError=!0)},c=t.st.image,l=u.find(".mfp-img"),f;return l.length&&(f=document.createElement("img"),f.className="mfp-img",r.el&&r.el.find("img").length&&(f.alt=r.el.find("img").attr("alt")),r.img=n(f).on("load.mfploader",o).on("error.mfploader",h),f.src=r.src,l.is("img")&&(r.img=r.img.clone()),f=r.img[0],f.naturalWidth>0?r.hasSize=!0:f.width||(r.hasSize=!1)),t._parseMarkup(u,{title:gt(r),img_replaceWith:r.img},r),t.resizeImage(),r.hasSize?(s&&clearInterval(s),r.loadError?(u.addClass("mfp-loading"),t.updateStatus("error",c.tError.replace("%url%",r.src))):(u.removeClass("mfp-loading"),t.updateStatus("ready")),u):(t.updateStatus("loading"),r.loading=!0,r.hasSize||(r.imgHidden=!0,u.addClass("mfp-loading"),t.findImageSize(r)),u)}}});ni=function(){return at===undefined&&(at=document.createElement("p").style.MozTransform!==undefined),at};n.magnificPopup.registerModule("zoom",{options:{enabled:!1,easing:"ease-in-out",duration:300,opener:function(n){return n.is("img")?n:n.find("img")}},proto:{initZoom:function(){var f=t.st.zoom,o=".zoom",u;if(f.enabled&&t.supportsTransition){var c=f.duration,l=function(n){var r=n.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"),u="all "+f.duration/1e3+"s "+f.easing,t={position:"fixed",zIndex:9999,left:0,top:0,"-webkit-backface-visibility":"hidden"},i="transition";return t["-webkit-"+i]=t["-moz-"+i]=t["-o-"+i]=t[i]=u,r.css(t),r},s=function(){t.content.css("visibility","visible")},e,n;r("BuildControls"+o,function(){if(t._allowZoom()){if(clearTimeout(e),t.content.css("visibility","hidden"),u=t._getItemToZoom(),!u){s();return}n=l(u);n.css(t._getOffset());t.wrap.append(n);e=setTimeout(function(){n.css(t._getOffset(!0));e=setTimeout(function(){s();setTimeout(function(){n.remove();u=n=null;i("ZoomAnimationEnded")},16)},c)},16)}});r(pt+o,function(){if(t._allowZoom()){if(clearTimeout(e),t.st.removalDelay=c,!u){if(u=t._getItemToZoom(),!u)return;n=l(u)}n.css(t._getOffset(!0));t.wrap.append(n);t.content.css("visibility","hidden");setTimeout(function(){n.css(t._getOffset())},16)}});r(h+o,function(){t._allowZoom()&&(s(),n&&n.remove(),u=null)})}},_allowZoom:function(){return t.currItem.type==="image"},_getItemToZoom:function(){return t.currItem.hasSize?t.currItem.img:!1},_getOffset:function(i){var r,u;r=i?t.currItem.img:t.st.zoom.opener(t.currItem.el||t.currItem);var f=r.offset(),e=parseInt(r.css("padding-top"),10),o=parseInt(r.css("padding-bottom"),10);return f.top-=n(window).scrollTop()-e,u={width:r.width(),height:(et?r.innerHeight():r[0].offsetHeight)-o-e},ni()?u["-moz-transform"]=u.transform="translate("+f.left+"px,"+f.top+"px)":(u.left=f.left,u.top=f.top),u}}});var l="iframe",ui="//about:blank",vt=function(n){if(t.currTemplate[l]){var i=t.currTemplate[l].find("iframe");i.length&&(n||(i[0].src=ui),t.isIE8&&i.css("display",n?"block":"none"))}};n.magnificPopup.registerModule(l,{options:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"><\/div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen><\/iframe><\/div>',srcAction:"iframe_src",patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"},gmaps:{index:"//maps.google.",src:"%id%&output=embed"}}},proto:{initIframe:function(){t.types.push(l);r("BeforeChange",function(n,t,i){t!==i&&(t===l?vt():i===l&&vt(!0))});r(h+"."+l,function(){vt()})},getIframe:function(i,r){var u=i.src,f=t.st.iframe,e;return n.each(f.patterns,function(){if(u.indexOf(this.index)>-1)return this.id&&(u=typeof this.id=="string"?u.substr(u.lastIndexOf(this.id)+this.id.length,u.length):this.id.call(this,u)),u=this.src.replace("%id%",u),!1}),e={},f.srcAction&&(e[f.srcAction]=u),t._parseMarkup(r,e,i),t.updateStatus("ready"),r}}});nt=function(n){var i=t.items.length;return n>i-1?n-i:n<0?i+n:n};yt=function(n,t,i){return n.replace(/%curr%/gi,t+1).replace(/%total%/gi,i)};n.magnificPopup.registerModule("gallery",{options:{enabled:!1,arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"><\/button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},proto:{initGallery:function(){var u=t.st.gallery,i=".mfp-gallery",f=Boolean(n.fn.mfpFastClick);if(t.direction=!0,!u||!u.enabled)return!1;c+=" mfp-gallery";r(rt+i,function(){u.navigateByImgClick&&t.wrap.on("click"+i,".mfp-img",function(){if(t.items.length>1)return t.next(),!1});o.on("keydown"+i,function(n){n.keyCode===37?t.prev():n.keyCode===39&&t.next()})});r("UpdateStatus"+i,function(n,i){i.text&&(i.text=yt(i.text,t.currItem.index,t.items.length))});r(it+i,function(n,i,r,f){var e=t.items.length;r.counter=e>1?yt(u.tCounter,f.index,e):""});r("BuildControls"+i,function(){if(t.items.length>1&&u.arrows&&!t.arrowLeft){var o=u.arrowMarkup,i=t.arrowLeft=n(o.replace(/%title%/gi,u.tPrev).replace(/%dir%/gi,"left")).addClass(ft),r=t.arrowRight=n(o.replace(/%title%/gi,u.tNext).replace(/%dir%/gi,"right")).addClass(ft),s=f?"mfpFastClick":"click";i[s](function(){t.prev()});r[s](function(){t.next()});t.isIE7&&(e("b",i[0],!1,!0),e("a",i[0],!1,!0),e("b",r[0],!1,!0),e("a",r[0],!1,!0));t.container.append(i.add(r))}});r(wt+i,function(){t._preloadTimeout&&clearTimeout(t._preloadTimeout);t._preloadTimeout=setTimeout(function(){t.preloadNearbyImages();t._preloadTimeout=null},16)});r(h+i,function(){o.off(i);t.wrap.off("click"+i);t.arrowLeft&&f&&t.arrowLeft.add(t.arrowRight).destroyMfpFastClick();t.arrowRight=t.arrowLeft=null})},next:function(){t.direction=!0;t.index=nt(t.index+1);t.updateItemHTML()},prev:function(){t.direction=!1;t.index=nt(t.index-1);t.updateItemHTML()},goTo:function(n){t.direction=n>=t.index;t.index=n;t.updateItemHTML()},preloadNearbyImages:function(){for(var i=t.st.gallery.preload,r=Math.min(i[0],t.items.length),u=Math.min(i[1],t.items.length),n=1;n<=(t.direction?u:r);n++)t._preloadItem(t.index+n);for(n=1;n<=(t.direction?r:u);n++)t._preloadItem(t.index-n)},_preloadItem:function(r){if(r=nt(r),!t.items[r].preloaded){var u=t.items[r];u.parsed||(u=t.parseEl(r));i("LazyLoad",u);u.type==="image"&&(u.img=n('<img class="mfp-img" />').on("load.mfploader",function(){u.hasSize=!0}).on("error.mfploader",function(){u.hasSize=!0;u.loadError=!0;i("LazyLoadError",u)}).attr("src",u.src));u.preloaded=!0}}}});tt="retina";n.magnificPopup.registerModule(tt,{options:{replaceSrc:function(n){return n.src.replace(/\.\w+$/,function(n){return"@2x"+n})},ratio:1},proto:{initRetina:function(){if(window.devicePixelRatio>1){var i=t.st.retina,n=i.ratio;n=isNaN(n)?n():n;n>1&&(r("ImageHasSize."+tt,function(t,i){i.img.css({"max-width":i.img[0].naturalWidth/n,width:"100%"})}),r("ElementParse."+tt,function(t,r){r.src=i.replaceSrc(r,n)}))}}}}),function(){var u=1e3,i="ontouchstart"in window,r=function(){f.off("touchmove"+t+" touchend"+t)},t=".mfpFastClick";n.fn.mfpFastClick=function(e){return n(this).each(function(){var l=n(this),s,a,v,y,h,o,c;if(i)l.on("touchstart"+t,function(n){h=!1;c=1;o=n.originalEvent?n.originalEvent.touches[0]:n.touches[0];v=o.clientX;y=o.clientY;f.on("touchmove"+t,function(n){o=n.originalEvent?n.originalEvent.touches:n.touches;c=o.length;o=o[0];(Math.abs(o.clientX-v)>10||Math.abs(o.clientY-y)>10)&&(h=!0,r())}).on("touchend"+t,function(n){(r(),h||c>1)||(s=!0,n.preventDefault(),clearTimeout(a),a=setTimeout(function(){s=!1},u),e())})});l.on("click"+t,function(){s||e()})})};n.fn.destroyMfpFastClick=function(){n(this).off("touchstart"+t+" click"+t);i&&f.off("touchmove"+t+" touchend"+t)}}();ht()});$(function(){$(document).on("scroll",function(){$(window).scrollTop()>100?$(".scroll-top-wrapper").addClass("show"):$(".scroll-top-wrapper").removeClass("show")});$(".scroll-top-wrapper").on("click",scrollToTop)});$(function(){SetUpModal()});$(function(){$(".jumper").click(function(n){n.preventDefault();$("#"+$(this).attr("data-id").replace(/\./g,"\\.")).length==0&&$(this).attr("href")!=null?($("#"+$(this).attr("data-articleid")).attr("data-callbackid",$(this).attr("id")),$("#"+$(this).attr("data-articleid")+" a").click()):JumpToID($(this).attr("data-id"))})});$(document).ready(function(){$('[data-toggle="popover"]').popover()});$(function(){$("EbookChapterPopOver a").click(function(){var n=$(this);$.get('@Url.Action("ShowPopOver", "eBookChapterNotSignedIn")',{},function(t){n.popover({html:!0,placement:"top",title:"Title",container:"body",content:t}).popover("show")})})});var advSearchPrevSingleYear="",advSearchPrevStartYear="",advSearchPrevEndYear="";for($("#advSearchSingleYear").keyup(function(){$("#advSearchSingleYear").blur();$("#advSearchSingleYear").focus()}),AdvSearchFieldCount=3,hackyTriggerOnChangeListAdvSearch=["advSearchJournalVolume","advSearchJournalIssue","advSearchJournalPage","advSearchProceedingsVolume","advSearchProceedingsPaper"],i=0;i<hackyTriggerOnChangeListAdvSearch.length;i++)id="#"+hackyTriggerOnChangeListAdvSearch[i],$(id).keyup(function(n){$(n.target).blur();$(n.target).focus()});$(document).ready(function(){function n(n,t){i?i=!1:history.pushState(n,null,t)}function r(n){var t=n.attr("data-minYear"),r=n.attr("data-maxYear");$("#divByYearContent")[0].style.display=="none"&&(i=!0,$("#divPROCEEDINGS_MENUBARli1>a").click());$(".DecadeBlock").hide();$("#divYEARMENUBAR .dropdown").removeClass("active");$("#"+t+"-"+r).toggle();n.parent().addClass("active")}function u(n,t){var i,r;$(".BrowseMenu").hide();$("#divPROCEEDINGS_MENUBAR .dropdown").removeClass("active");i=$("#"+t);i.toggle();r=$("[data-displayclass="+t+"]");r.parent().addClass("active")}var i=!1,t={proceedingMenu:"#divPROCEEDINGS_MENUBAR>.dropdown>a",conferenceTile:".ConferenceTitlePanel.col-xs-2",conferenceYear:".InnerScopeDetailsImageDiv>a",volumeLargeRange:"a.VolumeButton",volumeSmallRange:"a.ThousandVolBlockAnchor",yearSpecificYear:".ByYearToggle>a",yearByRange:"#divYEARMENUBAR>li>a"};$(t.volumeLargeRange).click(function(t){var f;t.preventDefault();var i=$(this),r=i.attr("href"),u=i.attr("data-volumerange");$(".NavAnchorButton").removeClass("VolumeButtonactive");$("#"+u+"Button").addClass("VolumeButtonactive");$(".ThousandVolBlock").hide();$("#"+u).toggle();f={type:"byvolume",href:r};n(f,r)});$(t.volumeSmallRange).click(function(t){var u;t.preventDefault();var i=$(this),r=i.attr("href"),f=i.attr("data-counter");YearVisibleToggle(t,f,"Vol");u={type:"bythousandvolume",href:r};n(u,r)});$(t.yearSpecificYear).click(function(t){var o;t.preventDefault();$("#divByYearContent")[0].style.display=="none"&&(i=!0,$("#divPROCEEDINGS_MENUBARli1>a").click());var u=$(this),s=u.attr("data-counter"),h=u.attr("data-year-range-url"),f=u.attr("href"),e=$("a[href='"+h+"']");e.parent().hasClass("active")||r(e);YearVisibleToggle(t,s,"");o={type:"byyear",href:f};n(o,f)});$(t.yearByRange).click(function(t){var i,u,f;t.preventDefault();i=$(this);r(i);u=i[0].getAttribute("href");f={type:"byyearrange",href:u};n(f,u)});$(t.proceedingMenu).click(function(t){var r;t.preventDefault();var e=$(this),f=e.attr("data-displayclass"),i=e.attr("href");u(i,f);switch(f){case"divByVolumeContent":r={type:"volume",href:i};break;case"divJustPublishedContent":u(i,f);r={type:"conference",href:i};break;case"divByYearContent":r={type:"byyear",href:i}}n(r,i)});$(t.conferenceTile).click(function(t){var f,e;t.preventDefault();var r=$(this),o=r.attr("data-year"),i=r.attr("data-conference"),s=r.attr("data-superSyposium"),u=jQuery(this).find("a").attr("href");$(".BrowseMenu").hide();$("#divByConferenceContent").toggle();$(".SelectYearRow").hide();$(".ScopeDetailsItem").css("display","none");$(".ActiveYear").css("display","none").removeClass(".ActiveYear");f=document.getElementById("YearDivID"+i);f.style.display="block";s=="true"?($("#div"+i+"SubSymposiums .subSympTitleToggle").show(),$(".ConferenceLine").hide(),$("#div"+i+"SubSymposiums .ConferenceLine").show(),$("#ConfYearItem"+i).css("display","block"),$("#SympYearImage"+i).attr("src","../Content/themes/SPIEImages/Collapse_Icon.png"),$("#SympYearDiv"+i).css("background-color","rgb(255, 241, 0)")):(YearVisibleToggle(this,i,"Conf"),YearVisibleToggle(this,i+o,"Inner"));e={type:"conferenceyear",href:u};n(e,u)});$(t.conferenceYear).click(function(t){var u;t.preventDefault();var i=$(this),r=i.attr("href"),f=i.attr("data-divname");YearVisibleToggle(this,f,"Inner");u={type:"byyear",href:r};n(u,r)});window.addEventListener("popstate",function(n){var u,r,t;i=!0;u=["conference","conferenceyear","byyearrange","byyear","byvolume","volume"];n.state!=null&&u.indexOf(n.state.type)!==-1?(r=n.state.href,t=$("a[href='"+r+"']"),t.length>1?t[0].click():t.length==1&&t.click(),console.log("POP: "+r)):location.href.indexOf("conference-proceedings-of-spie/browse")!==1&&$("[data-displayclass=divJustPublishedContent]").click()});$("#headerSearchTerm").autocomplete({source:function(n,t){$("#headerSearchTermGray").val("");SearchTermAutoCompleteSource(n,t)},focus:function(n,t){return $("#headerSearchTermGray").val(t.item.value),!1},select:function(n,t){$(this).val(t.item.value);$(this).parents("form").submit()}}).autocomplete("widget").addClass("searchTermAutoComplete");$("#fixedFooterSearchTerm").autocomplete({source:function(n,t){$("#fixedFooterSearchTermGray").val("");SearchTermAutoCompleteSource(n,t)},focus:function(n,t){return $("#fixedFooterSearchTermGray").val(t.item.value),!1},select:function(n,t){$(this).val(t.item.value);$(this).parents("form").submit()}}).autocomplete("widget").addClass("searchTermAutoComplete");$(".searchTermTextbox").keyup(function(){event.keyCode===$.ui.keyCode.RIGHT&&$(this).val($("#"+this.id+"Gray").val());$(this).val()==""&&$("#"+this.id+"Gray").val("")});$("select.advSearchFieldSelect, select.advSearchLogic").each(function(){$(this).val($(this).find("option[selected]").val())});$(".fixedFooterClose").click(function(){createCookie("floatingFooterHide",!0);$("#fixedBottom")[0].style.display="none"});readCookie("floatingFooterHide")&&($("#fixedBottom")[0].style.display="none")})